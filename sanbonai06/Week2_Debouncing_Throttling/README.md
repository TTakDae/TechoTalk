# Debouncing

### 정의

> 연이어 호출되는 함수들 중 *** 제일 처음 또는 마지막 함수만 호출 ***되도록 하는 것

* 요즘 사용되는 서비스들은 굳이 엔터키를 입력해주지 않아도 검색 결과가 나온다. 

  * 이러한 서비스 구현을 위해서는 항상 input 이벤트가 대기중이여야 함.

  * But, 항상 input 이벤트가 대기중이면 글자를 음운단위로 쪼개면서 이벤트가 실행되므로 리소스가 커짐, 유료 API를 사용하는 경우 이벤트 실행마다 쿼리가 날라가기 때문에 비용이 어마어마하게 커짐

  * Ex. 안녕 => *ㅇ 아 안 안ㄴ 안녀 안녕* 처럼 모두 이벤트가 실행

  * 위의 문제점을 해결하기 위한 디바운싱 코드

    ![스크린샷 2022-06-28 오후 3.22.41](/Users/sanbonai06/Library/Application Support/typora-user-images/스크린샷 2022-06-28 오후 3.22.41.png)

    * 매커니즘은 input이벤트가 발생할 때마다 현재 실행되고 있는 타이머를 취소 => 다시 설정해놓은 시간만큼의 타이머를 실행시킴

      => 만약 타이머가 종료될 시에는 입력이 끝난 것으로 간주하고 걸어놓은 함수 실 (요청 전송)

      

### Leading edge VS Trailing edge

* 디바운싱의 정의를 다시 살펴보자

> 연이어 호출되는 함수들 중 *** 제일 처음 또는 마지막 함수만 호출 ***되도록 하는 것

위에서 살펴본 예시에는 제일 마지막 함수만 호출 하는 코드를 살펴보았다. 하지만 디바운싱에는 처음 실행되는 함수만 호출 할 수도 있다.

이 다른 두 방식을 *** Leading edge / Trailing edge *** 라고 부른다.

* Leading edge: 처음 실행한 함수만 실행 후 뒤의 실행되는 이벤트들은 무시한다.
* Trailing edge: 마지막 실행한 함수만 실행하고 그 전에 실행되는 이벤트들은 무시한다.
* 밑의 코드는 함수의 인수로 leading 의 여부를 boolean 값으로 넘겨 디바운싱을 두 방식으로 실행하는 코드이다.
  * ![스크린샷 2022-06-28 오후 3.45.58](/Users/sanbonai06/Library/Application Support/typora-user-images/스크린샷 2022-06-28 오후 3.45.58.png)



### Debounce Leading edge Vs Throttling

* 위의 예시 코드를 보고 생각을 해보면 *"어? Throttling 방식과 뭐가 다른거지"* 라고 생각이 든다.
* 실제로 두 방식 모두 *** 첫 번째 이벤트를 실행하고 일정시간 동안 모든 이벤트들을 무시한다 *** 라는 굉장히 유사한 플로우를 가진다.
* 하지만
  * 디바운스의 Leading edge 방식은 걸어놓은 *** 타이머 시간안에 이벤트가 지속적으로 실행 될 경우 *** 모든 이벤트들을 무시한다.
  * Throttling 방식은 첫 번째 이벤트가 실행 된 후 걸어놓은 *** 타이머 시간동안 들어오는 모든 이벤트들은 무시 / 타이머가 만료되면 허용 ***한다.



# Throttling

### 정의

> 마지막 함수가 호출된 후 *** 일정 시간이 지나기 전에 다시 호출되지 않도록 *** 하는 것 (성능문제를 해결하기 위해 많이 사용)

* 웹사이트 구축 시 스크롤을 내릴 때 scroll 이벤트는 반복적으로 발생
  * Ex. 무한 스크롤 방식처럼 스크롤을 내릴 때마다 DB에 요청을 보내는 방식이라면 요청이 어마무시하게 전송 될 것임.
  * 위의 문제점을 해결하기 위해 사용하는 기법인 쓰로틀링 예시 코드
  * ![스크린샷 2022-06-28 오후 3.34.59](/Users/sanbonai06/Library/Application Support/typora-user-images/스크린샷 2022-06-28 오후 3.34.59.png)



### 디바운싱과 쓰로틀링의 차이

> 스크롤 이벤트를 예시로 들어보자

* 디바운싱은 스크롤을 내리다가 멈출 시 *** 일정 시간이 지난 후 ***에 지정해놓은 함수를 실행
* 쓰로틀링은 처음 스크롤을 내릴 때 이벤트 발생 후 *** 일정시간동안 이벤트가 발생하지 않다가 *** 타이머가 만료되면 지정해놓은 함수를 실행



# 정리

### 디바운싱

* 웹에서 주로 ajax 검색에 사용된다.
* 그룹의 처음 또는 마지막으로 실행된 함수를 처리하는 방식
* Leading edge/ Trailing edge 방식이 있다.



### 쓰로틀링

* 주로 성능 개선을 위해 사용된다. (위에서 말한 예시인 무한 스크롤)
* 타이머를 걸어 놓고 이벤트를 타이머의 주기 마다 발생시키도록 하는 기술이다.

