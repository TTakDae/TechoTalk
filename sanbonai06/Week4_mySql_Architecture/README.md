# MySQL Architecture

### MySQL 구조

<img width="657" alt="스크린샷 2022-07-12 오후 1 48 53" src="https://user-images.githubusercontent.com/59060780/178410819-f408e45f-8f36-4ecf-be29-5c11bf01bfb4.png">

* MySQL 접속 클라이언트
  * 다양한 언어에서 접속 가능케하는 API / 쉘 스크립트를 통해 접속 할 수 있게해주는 역할

* MySQL 엔진
  * 클라의 접속과 SQL 요청을 처리해준다.
  * 쿼리 파서 / 전처리기 / 옵티마이저 / 실행 엔진
  * 옵티마이저: SQL 요청문을 최적화 하기 위해 실행 계획을 짜는 역할을 수행
  
* MySQL 스토리지 엔진
  * 디스크에 정보를 저장 / 디스크에 저장된 정보를 읽어오는 역할
  
* 운영체제와 하드웨어
  * 실제 테이블의 데이터와 로그 데이터를 파일로 저장하는 부분
  
### 쿼리 실행 과정

<img width="291" alt="스크린샷 2022-07-12 오후 1 55 21" src="https://user-images.githubusercontent.com/59060780/178411606-d3401aac-2338-4c30-aafe-453c40c3069c.png">

* 쿼리 캐시
  * SQL 요청문의 실행 결과를 메모리에 캐싱하는 역할
  * 하지만, 테이블의 데이터가 변경될 경우 캐시에 있는 데이터를 삭제해야하므로 성능이 저하 됨 == 캐시에 접근하는 쓰레드 자체에 Lock이 걸리게 되므로 (동시 처리 성능 저하) => 8.0버전 부터 제거
  
* 쿼리 파서
  * SQL 문장을 토큰으로 쪼개서 파스 트리로 만듦 (프로그래밍 언어론에서 배운 파스 트리 구현 방식과 비슷)
  * 파스 트리로 쪼개는 과정에서 SQL 문법 오류를 탐지하고 에러 처리
  
* 전처리기
  * 쿼리 파서에서 생성한 파스 트리를 기반으로 SQL 요청문의 문장 구조 체크
  * 토큰이 유효한지 체크 (Ex. 실제 존재하는 테이블 명인지, 해당 테이블에 컬럼 또는 레코드가 실제로 존재하는지, 접근할 수 있는 값인지)
  
* 옵티마이저
  * 
  
